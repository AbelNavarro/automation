---
proposals:
- barclamp: crowbar
  attributes:
    instances:
      ganglia: []
      nagios: []
      provisioner:
      - "/var/lib/crowbar/config/provisioner.json"
      network:
      - "/var/lib/crowbar/config/network.json"
      dns:
      - "/var/lib/crowbar/config/dns.json"
    realm: SUSE OpenStack Cloud Admin Server
    users:
      machine-install:
        password: 815dd8c5edb01a4e98cadd428741e6aa44f9c356ff668e73c2db31e805b8361a5e1b5bb3996302f2833969b49e1e8c23e8938826f6999fd648ab6f7d48f46b0d
  deployment:
    elements:
      crowbar:
      - crowbar.qa4.cloud.suse.de
- barclamp: deployer
  attributes:
  deployment:
    elements:
      deployer-client:
      - crowbar.qa4.cloud.suse.de
      - "@@service1@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@controller2@@"
      - "@@compute2@@"
- barclamp: provisioner
  attributes:
  deployment:
    elements:
      provisioner-server:
      - crowbar.qa4.cloud.suse.de
      provisioner-base:
      - crowbar.qa4.cloud.suse.de
      - "@@service1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
      provisioner-bootdisk-finder:
      - crowbar.qa4.cloud.suse.de
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
      - "@@service1@@"
- barclamp: ipmi
  attributes:
    bmc_enable: true
  deployment:
    elements:
      ipmi-discover:
      - crowbar.qa4.cloud.suse.de
      - "@@service1@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@controller2@@"
      - "@@compute2@@"
      ipmi-configure:
      - crowbar.qa4.cloud.suse.de
      - "@@service1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
      bmc-nat-router:
      - crowbar.qa4.cloud.suse.de
      bmc-nat-client:
      - "@@service1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
- barclamp: network
  wipe_attributes:
    - interface_map
  attributes:
    mode: dual
    teaming:
      mode: 5
    conduit_map:
    - pattern: team/.*/^crowbar$
      conduit_list:
        intf2:
          if_list:
          - 1g1
        intf1:
          if_list:
          - 1g1
        intf0:
          if_list:
          - 1g1
    - pattern: dual/.*/^crowbar$
      conduit_list:
        intf2:
          if_list:
          - 1g1
        intf1:
          if_list:
          - 1g1
        intf0:
          if_list:
          - 1g1
    - pattern: team/.*/.*
      conduit_list:
        intf2:
          if_list:
          - 1g1
          - 1g2
          team_mode: 5
        intf1:
          if_list:
          - 1g1
          - 1g2
          team_mode: 5
        intf0:
          if_list:
          - 1g1
          - 1g2
          team_mode: 5
    - pattern: dual/.*/.*
      conduit_list:
        intf2:
          if_list:
          - 1g1
        intf1:
          if_list:
          - 1g2
        intf0:
          if_list:
          - 1g1
    - pattern: single/.*/.*
      conduit_list:
        intf2:
          if_list:
          - 1g1
        intf1:
          if_list:
          - 1g1
        intf0:
          if_list:
          - 1g1
    - pattern: ".*/.*/.*"
      conduit_list:
        intf2:
          if_list:
          - 1g1
        intf1:
          if_list:
          - 1g1
        intf0:
          if_list:
          - 1g1
    - pattern: mode/1g_adpt_count/role
      conduit_list:
        intf2:
          if_list:
          - 1g1
        intf1:
          if_list:
          - 1g1
        intf0:
          if_list:
          - 1g1
    networks:
      storage:
        vlan: 716
      public:
        vlan: 715
        subnet: 10.162.67.0
        broadcast: 10.162.67.255
        router: 10.162.67.1
        ranges:
          dhcp:
            start: 10.162.67.1
            end: 10.162.67.50
          host:
            start: 10.162.67.51
            end: 10.162.67.100
      nova_fixed:
        vlan: 717
        subnet: 44.0.0.0
        netmask: 255.255.0.0
        broadcast: 44.0.255.255
        router: 44.0.0.1
        ranges:
          router:
            start: 44.0.0.1
            end: 44.0.0.10
          dhcp:
            start: 44.0.0.11
            end: 44.0.255.250
      nova_floating:
        vlan: 715
        subnet: 10.162.67.0
        netmask: 255.255.255.0
        broadcast: 10.162.67.255
        ranges:
          host:
            start: 10.162.67.101
            end: 10.162.67.200
      bmc:
        router: 10.162.65.254
        vlan: 711
        use_vlan: true
        subnet: 10.162.65.0
        broadcast: 10.162.65.255
        ranges:
          host:
            start: 10.162.65.49
            end: 10.162.65.89
      bmc_vlan:
        router: 10.162.65.254
        vlan: 711
        subnet: 10.162.65.0
        broadcast: 10.162.65.255
        ranges:
          host:
            start: 10.162.65.149
            end: 10.162.65.199
      os_sdn:
        vlan: 716
      admin:
        vlan: 714
        subnet: 10.162.66.0
        netmask: 255.255.255.128
        broadcast: 10.162.66.127
        router: 10.162.66.1
        ranges:
          admin:
            start: 10.162.66.10
            end: 10.162.66.22
          dhcp:
            start: 10.162.66.30
            end: 10.162.66.49
          host:
            start: 10.162.66.50
            end: 10.162.66.69
          switch:
            start: 10.162.66.23
            end: 10.162.66.29
  deployment:
    elements:
      switch_config:
      - crowbar.qa4.cloud.suse.de
      network:
      - crowbar.qa4.cloud.suse.de
      - "@@service1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
- barclamp: dns
  attributes:
    domain: qa4.cloud.suse.de
    forwarders:
    - 10.162.66.1
    records:
      multi-dns:
        ips:
        - 10.11.12.13
  deployment:
    elements:
      dns-server:
      - crowbar.qa4.cloud.suse.de
      dns-client:
      - crowbar.qa4.cloud.suse.de
      - "@@service1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
- barclamp: logging
  attributes:
  deployment:
    elements:
      logging-server:
      - crowbar.qa4.cloud.suse.de
      logging-client:
      - "@@service1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
- barclamp: ntp
  attributes:
  deployment:
    elements:
      ntp-server:
      - crowbar.qa4.cloud.suse.de
      ntp-client:
      - "@@service1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      - "@@controller1@@"
      - "@@compute1@@"
      - "@@compute2@@"
- barclamp: pacemaker
  name: proposal_1
  attributes:
    stonith:
      mode: ipmi_barclamp
      per_node:
        nodes:
          d00-25-90-e4-1c-ae.qa4.cloud.suse.de:
            params: ''
          d00-25-90-e4-22-52.qa4.cloud.suse.de:
            params: ''
          d00-25-90-e4-24-c4.qa4.cloud.suse.de:
            params: ''
    drbd:
      shared_secret: AABPXS6ALOah
  deployment:
    elements:
      pacemaker-cluster-member:
      - "@@controller1@@"
      - "@@controller2@@"
      - "@@controller3@@"
      hawk-server:
      - "@@controller1@@"
      - "@@controller2@@"
      - "@@controller3@@"
- barclamp: database
  attributes:
    ha:
      storage:
        shared:
          device: 10.162.66.1:/srv/nfs/cloud4-ha-database
          fstype: nfs
  deployment:
    elements:
      database-server:
      - cluster:proposal_1
- barclamp: rabbitmq
  attributes:
    ha:
      storage:
        shared:
          device: 10.162.66.1:/srv/nfs/cloud4-ha-rabbitmq
          fstype: nfs
  deployment:
    elements:
      rabbitmq-server:
      - cluster:proposal_1
- barclamp: keystone
  attributes:
    database_instance: default
    rabbitmq_instance: default
    ssl:
      generate_certs: true
      insecure: true
    api:
      protocol: https
  deployment:
    elements:
      keystone-server:
      - cluster:proposal_1
- barclamp: swift
  attributes:
    ssl:
      enabled: true
      generate_certs: true
      insecure: true
    cluster_hash: 181d283256
    keystone_instance: default
  deployment:
    elements:
      swift-dispersion:
      - "@@service1@@"
      swift-proxy:
      - "@@service1@@"
      swift-ring-compute:
      - "@@service1@@"
      swift-storage:
      - "@@service1@@"
      - "@@compute1@@"
      - "@@compute2@@"
- barclamp: glance
  attributes:
    api:
      protocol: https
    ssl:
      generate_certs: true
      insecure: true
    default_store: swift
    keystone_instance: default
    database_instance: default
    rabbitmq_instance: default
  deployment:
    elements:
      glance-server:
      - "@@service1@@"
- barclamp: cinder
  attributes:
    rabbitmq_instance: default
    keystone_instance: default
    glance_instance: default
    database_instance: default
    volumes:
    - backend_driver: raw
      backend_name: default
      raw:
        volume_name: cinder-volumes
        cinder_raw_method: all
    api:
      protocol: https
    ssl:
      generate_certs: true
      insecure: true
  deployment:
    elements:
      cinder-controller:
      - "@@service1@@"
      cinder-volume:
      - "@@controller1@@"
- barclamp: neutron
  attributes:
    rabbitmq_instance: default
    keystone_instance: default
    use_l2pop: false
    ml2_mechanism_drivers:
    - linuxbridge
    ml2_type_drivers:
    - vlan
    ml2_type_drivers_default_provider_network: vlan
    ml2_type_drivers_default_tenant_network: vlan
    database_instance: default
    ssl:
      generate_certs: true
      insecure: true
    api:
      protocol: https
  deployment:
    elements:
      neutron-server:
      - "@@service1@@"
      neutron-network:
      - "@@service1@@"
- barclamp: nova
  attributes:
    database_instance: default
    rabbitmq_instance: default
    keystone_instance: default
    glance_instance: default
    cinder_instance: default
    neutron_instance: default
    itxt_instance: ''
    use_shared_instance_storage: true
    use_migration: true
    vnc_keymap: de-de
    kvm:
      ksm_enabled: true
    ssl:
      enabled: true
      generate_certs: true
      insecure: true
    novnc:
      ssl:
        enabled: true
  deployment:
    elements:
      nova-controller:
      - "@@service1@@"
      nova-compute-hyperv: []
      nova-compute-kvm:
      - "@@compute2@@"
      - "@@compute1@@"
      nova-compute-qemu: []
      nova-compute-xen: []
- barclamp: horizon
  attributes:
    nova_instance: default
    keystone_instance: default
    database_instance: default
    apache:
      generate_certs: true
      ssl: true
  deployment:
    elements:
      horizon-server:
      - "@@controller1@@"
- barclamp: heat
  attributes:
    rabbitmq_instance: default
    database_instance: default
    keystone_instance: default
  deployment:
    elements:
      heat-server:
      - "@@controller1@@"
- barclamp: ceilometer
  attributes:
    rabbitmq_instance: default
    database_instance: default
    keystone_instance: default
  deployment:
    elements:
      ceilometer-agent:
      - "@@compute1@@"
      ceilometer-agent-hyperv: []
      ceilometer-cagent:
      - "@@service1@@"
      ceilometer-server:
      - "@@service1@@"
      ceilometer-swift-proxy-middleware:
      - "@@service1@@"
- barclamp: tempest
  attributes:
    nova_instance: default
  deployment:
    elements:
      tempest:
      - "@@service1@@"
